# frozen_string_literal: true

Pry.config.prompt = proc { |obj, nest_lvl, _| "[#{nest_lvl}] #{obj} \e[1;37m❯ \e[0m" }

# *** PLUGINS ***
begin
  require 'awesome_print'
  AwesomePrint.pry!
  AwesomePrint.defaults = { indent: -2, limit: 50 }
rescue LoadError => e
  puts 'gem install awesome_print  # <-- highly recommended'
end

$LOAD_PATH << __dir__

def r!
  reload!
end

if defined?(PryByebug)
  Pry.commands.alias_command 'c', 'continue'
  Pry.commands.alias_command 's', 'step'
  Pry.commands.alias_command 'n', 'next'
  Pry.commands.alias_command 'f', 'finish'
  Pry.commands.alias_command 'u', 'up'
  Pry.commands.alias_command 'd', 'down'
  Pry.commands.alias_command 'w', 'whereami'

  # Hit Enter to repeat last command
  Pry::Commands.command /^$/, 'repeat last command' do
    _pry_.run_command Pry.history.to_a.last
  end
end
