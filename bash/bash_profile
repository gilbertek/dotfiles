# Case-Insensitive Auto Completion
bind "set completion-ignore-case on"

# Motivation reminder
# echo "2017 12 31" | awk '{dt=mktime($0 " 00 00 00")-systime(); \
# print "There are " int(dt/86400/7) " weeks left until the year ends. \
# What will you do?";}';

# Load the shell dotfiles, and then some:
for file in ~/.{aliases,functions}; do
  [ -r "$file" ] && [ -f "$file" ] && . "$file";
done;
unset file;

# Add `~/bin` to the `$PATH`
export PATH=$HOME/bin:$PATH

# Homebrew
export PATH="/usr/local/bin:$PATH"
export PATH="/usr/local/sbin:$PATH"

# GO Path setups
export PATH=$PATH:/usr/local/opt/go/libexec/bin
export GOPATH=$HOME/Projects/GOAPPS
export PATH=$PATH:$GOPATH/bin
export GOAPPS=$GOPATH/src/github.com/gilbertek

# Groovy Home path setup
export GROOVY_HOME=/usr/local/opt/groovy/libexec

export JAVA_HOME
JAVA_HOME=$(/usr/libexec/java_home)

# Haskell/hdevtools Home path setup
export PATH=~/.local/bin:$PATH

# PHP CLI
# export PATH="$(brew --prefix homebrew/php/php70)/bin:$PATH"
export PATH="/usr/local/opt/php@5.6/bin:$PATH"

# Persistent history in Elixir repl IEx
export ERL_AFLAGS="-kernel shell_history enabled"

if which brew  > /dev/null 2>&1
then
  BREW_PATH=/usr/local # $(brew --prefix) for faster load
else
  BREW_PATH=""
fi

export EDITOR=nvim
export VISUAL=nvim

#Ignore duplicate commands, space-prefixed, and misc boring cmds.
export HISTIGNORE="&:[ ]*:exit:gs:gl"
# Massive main .bash_history...
export HISTFILESIZE=10000
# Larger session histories...
export HISTSIZE=1000

# Disable Homebrew analytics
export HOMEBREW_NO_ANALYTICS=1
export DOTNET_CLI_TELEMETRY_OPTOUT=1

# Case-insensitive globbing (used in pathname expansion)
shopt -s nocaseglob;

# Append to the Bash history file, rather than overwriting it
shopt -s histappend;

# Autocorrect typos in path names when using `cd`
shopt -s cdspell;

# Visible cucumber step locations
export CUCUMBER_COLORS=comment=cyan

export PROJECT_HOME=$HOME/Projects

export CLICOLOR='true'

export TERM=xterm-256color

# Elixir Version information
export ELIXIR_VERSION=$(elixir -v | grep -o 'Elixir \d.\d.\d' | grep -o '\d.\d.\d')

### Foreground Colours #######################################################
ATTRIBUTE_BOLD='\[\e[1m\]'
ATTRIBUTE_RESET='\[\e[0m\]'
COLOR_DEFAULT='\[\e[39m\]'
COLOR_RED='\[\e[31m\]'
COLOR_GREEN='\[\[\033[32m\]'
COLOR_YELLOW='\[\e[33m\]'
COLOR_MAGENTA='\[\e[35m\]'
COLOR_CYAN='\[\e[36m\]'
COLOR_CYAN_LIGHT="\[\033[1;36m\]"
COLOR_BLUE='\[\033[38;5;75m\]'
COLOR_DARK_BLUE="\[\033[0;34m\]"
COLOR_PURPLE="\[\033[0;35m\]"
COLOR_LIGHT_GRAY="\[\033[0;37m\]"

# ♥ ☆ ⚡ λ ❯ ▸ → - Keeping some cool ASCII Characters for reference
# Define the prompt character
CHAR='❯'

PS1="${COLOR_BLUE}[${COLOR_CYAN}\\u ${COLOR_GREEN}in ${COLOR_YELLOW}\
\W${COLOR_CYAN}\$(parse_git_branch)${COLOR_BLUE}]${CHAR}${COLOR_DEFAULT} "

# For a ipython notebook and pyspark integration
if which pyspark > /dev/null; then
  export SPARK_HOME="$(brew --prefix apache-spark)/libexec"
  export PYSPARK_SUBMIT_ARGS="--master local[2]"
  export PYSPARK_DRIVER=python3
  export PYSPARK_DRIVER_PYTHON=jupyter
  export PYSPARK_DRIVER_PYTHON_OPTS=notebook
fi

# bash completion from Homebrew
if [ -f ${BREW_PATH}/etc/bash_completion ]; then
  source ${BREW_PATH}/etc/bash_completion
fi

if [ -f ~/.config/exercism/exercism_completion.bash ]; then
  . ~/.config/exercism/exercism_completion.bash
fi

eval "$(hub alias -s)"

if which rbenv >/dev/null 2>&1
then
    eval "$(rbenv init -)"
fi
# Motivation reminder
# echo "2017 12 31" | awk '{dt=mktime($0 " 00 00 00")-systime(); print "There are " int(dt/86400/7) " weeks left until the year ends. What will you do?";}'

# asdf package manager
if [ -f $BREW_PATH/opt/asdf/asdf.sh ]; then
  source $BREW_PATH/opt/asdf/asdf.sh
fi

# OPAM configuration
source ~/.opam/opam-init/init.sh > /dev/null 2> /dev/null || true


[[ -s $HOME/.aliases ]]               && source $HOME/.aliases
[[ -s $HOME/.functions ]]             && source $HOME/.functions

